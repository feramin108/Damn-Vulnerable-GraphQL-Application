:::success


# Exploiting  Vulnerable GraphQL Application


### Author: **==`Mbachan  Fabrice Tanwan`==** <img src="https://s3.hedgedoc.org/demo/uploads/85b205fa-8996-4797-87c0-00e8563ee382.jpg" style="border-radius: 50%; width: 50px; height: 50px;" alt="Author's Avatar">

### Affiliation: **==`Innopolis University`==** <img src="https://s3.hedgedoc.org/demo/uploads/20b271a1-6fac-4409-8829-f85d8da2c9fe.jpeg" style="border-radius: 50%; width: 50px; height: 50px;" alt="Author's Avatar">
:::




## Introduction 
Damn Vulnerable GraphQL Application is an intentionally vulnerable implementation of Facebook's GraphQL technology, to learn and practice GraphQL Security.You can  get  the  codes  from [SNE-M23-SN](https://github.com/SNE-M23-SN/Damn-Vulnerable-GraphQL-Application.git/) Credit Goes to [Dolev Farhi](https://github.com/dolevf) where we  forked the  repo.

Damn Vulnerable GraphQL is a purposely weak and insecure implementation of GraphQL that provides a safe environment for attacking GraphQL applications and testing for vulnerabilities.



## Tools and Setup
To obtain a thorough grasp of the vulnerabilities you're working with and properly exploit them, you'll need a set of specific tools. Here's a list of key tools you'll need.

1. **Docker**

    **Docker** is a platform that has gained wide acceptance for *containerization*. It greatly simplifies the process of managing and deploying applications in containers, making it a vital tool for any developer.
    <center>   
    
    ![](https://s3.hedgedoc.org/demo/uploads/749c1f2d-b0c8-4a49-9355-14c32179d69d.png)

</center>
 
    
- **[Install Docker](https://docs.docker.com/engine/install/)**: You can follow the detailed instructions provided on the **Docker** website to install **Docker** on your system. This will ensure that you have the latest and most secure version.

2.  **Burp Suite**

    **Burp Suite** is a formidable tool in the realm of *web application security testing*. It offers a wide array of features, suitable for both manual and automated testing. It plays a vital role in intercepting and analyzing **HTTP** requests and responses, making it indispensable for security testing.
    
    <center>

       ![](https://s3.hedgedoc.org/demo/uploads/6b6e4de4-4880-4aea-bc8b-a2223f31058e.jpeg)
    

    </center>

- **[Download Burp Suite](https://portswigger.net/burp/documentation/desktop/getting-started/download-and-install)**: You can download the **Burp Suite Community Edition** for a comprehensive web application security testing toolkit.

---
3. **Postman**

    **Postman** has garnered popularity as a highly effective tool for testing **APIs**. It provides an intuitive user interface that allows you to easily send **HTTP** requests and closely examine the responses you receive. You have the option to use either the *desktop* application or the *web* version, depending on your preference.
    <center>

    ![](https://s3.hedgedoc.org/demo/uploads/312bc4c2-7294-42a9-ad07-072320f38203.png)

    </center>

- **[Desktop Version](https://www.postman.com/downloads/)**: You can download the **Postman** desktop application for a more robust and responsive interaction.
- **[Web Version](https://web.postman.co/home)**: If you prefer a more lightweight approach, you can use the **Postman for Web**.

---
**Postman** and **Burp Suite** are both popular tools used for **API** testing, but they serve different purposes:

- **==Postman==** is primarily used for *building, testing*, and documenting *APIs*. It provides a user-friendly interface for creating API requests, managing environments, and collaborating with team members.

- **==Burp Suite==** is a comprehensive *web application security testing platform*. While it can be used for *API testing*, its main focus is on identifying vulnerabilities in web applications, including those exposed through APIs.

Combining **Postman** and **Burp Suite** in this guide can be beneficial for the following reasons:

1. **Postman** can be used to create and execute *API requests*, while **Burp Suite** can intercept and analyze the traffic to identify potential security issues.

2. **Burp Suite** can be used to test APIs for vulnerabilities like *injection flaws*, *broken authentication*, and *security misconfigurations*, which are covered in the **OWASP API Security Top 10**.

3. Using both tools together provides a more comprehensive approach to API testing, leveraging the strengths of each tool.

**Docker** is chosen as the containerization tool in this guide for several reasons:

1. **Docker** is the most popular and widely-used containerization platform, with a large and active community.

2. **Docker** provides a consistent and reproducible environment for running applications, making it easier to set up and deploy the **vAPI** application.

3. **Docker** simplifies the management of dependencies and ensures that the application runs consistently across different environments.

In addition to **Docker**, this guide will also use **Docker Compose** to define and manage the multi-container application. **Docker Compose** allows you to define the services, networks, and volumes required for the application in a single configuration file, making it easier to set up and manage the environment.

---
## Setting Up DVGA
#### Prerequisites
The following Python3 libraries are required:

- Python3 (3.6 - 3.9) (3.10 is not supported)
- Flask
- Flask-SQLAlchemy
- Flask-Sockets
- Gevent
- Graphene
- Graphene-SQLAlchemy
- Rx
## Installation
### Docker
**Clone the repository**
```git clone hhttps://github.com/SNE-M23-SN/Damn-Vulnerable-GraphQL-Application```

**Build the Docker image**
```docker build -t dvga .```

**Note:** If you are using an ARM-based Mac, use the Dedicated Dockerfile.arm64 file:

```docker build -t dvga -f Dockerfile.arm64 .```

**Create a container from the image**
```docker run -d -t -p 5013:5013 -e WEB_HOST=0.0.0.0 --name dvga dvga```

In your browser, navigate to http://localhost:5013

**Note:** if you need the application to bind on a specific port (e.g. 8080), use **-e WEB_PORT=8080.**
![](https://s3.hedgedoc.org/demo/uploads/ca8a7494-576a-446d-ba73-e89760d09331.png)
![](https://s3.hedgedoc.org/demo/uploads/3dd2680e-0fc2-4d16-99b2-7af2e48d70bd.png)

## Attack Scenarios
See the  [Scenario section ](https://github.com/SNE-M23-SN/Damn-Vulnerable-GraphQL-Application.git/)


## Attack  Demonstration

To see  how the various  scenarios  are  compromised  visit your  app  at  http://localhost:5013/solutions assuming  you are  still  working  on port **5013**

## Possible solutions
1. Limit Introspection Queries
2. Implement Rate Limiting
3. Query Complexity Analysis
4. Input Validation and Sanitization
5. Authentication and Authorization
6. Error Handling
7. Logging and Monitoring
8. Security Headers

## Conclusion
GraphQL, while offering flexibility and efficiency in API design, introduces several unique security challenges that must be addressed to protect applications and data. From reconnaissance and fingerprinting to a variety of injection and denial of service attacks, understanding these vulnerabilities is crucial for both developers and security professionals.

By being aware of these potential vulnerabilities and implementing strong security measures, developers can harness the power of GraphQL while maintaining a robust security posture. Regular security audits, continuous monitoring, and staying updated with the latest security practices will further enhance the resilience of GraphQL APIs against evolving threats.